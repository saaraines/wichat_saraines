<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.26">
<title>wichat_saraines</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child{border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock pre>code{display:block}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active,#footnotes .footnote a:first-of-type:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article">
<div id="header">
<h1><span class="image"><img src="./images/arc42-logo.png" alt="arc42"></span> wichat_saraines</h1>
<div class="details">
<span id="revnumber">version 8.3 ES,</span>
<span id="revdate">Diciembre 2025</span>
<br><span id="revremark">(based upon AsciiDoc version)</span>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#section-introduction-and-goals">1. Introducción y Objetivos</a>
<ul class="sectlevel2">
<li><a href="#_requisitos">1.1. Requisitos</a></li>
<li><a href="#_objetivos_de_calidad">1.2. Objetivos de calidad</a></li>
<li><a href="#_stakeholders">1.3. Stakeholders</a></li>
</ul>
</li>
<li><a href="#section-architecture-constraints">2. Restricciones arquitectónicas</a>
<ul class="sectlevel2">
<li><a href="#_restricciones_técnicas">2.1. Restricciones técnicas</a></li>
<li><a href="#_restricciones_organizativas">2.2. Restricciones organizativas</a></li>
</ul>
</li>
<li><a href="#section-context-and-scope">3. Contexto y Alcance</a>
<ul class="sectlevel2">
<li><a href="#_contexto_empresarial">3.1. Contexto Empresarial</a></li>
<li><a href="#_contexto_técnico">3.2. Contexto técnico</a></li>
</ul>
</li>
<li><a href="#section-solution-strategy">4. Estrategia de Solución</a>
<ul class="sectlevel2">
<li><a href="#_decisiones_tecnológicas">4.1. Decisiones Tecnológicas</a></li>
<li><a href="#_decisiones_de_alto_nivel">4.2. Decisiones de Alto Nivel</a></li>
<li><a href="#_estructura_del_sistema">4.3. Estructura del Sistema</a></li>
<li><a href="#_calidad">4.4. Calidad</a></li>
</ul>
</li>
<li><a href="#section-building-block-view">5. Vista de Bloques de Construcción</a>
<ul class="sectlevel2">
<li><a href="#_sistema_completo_nivel_1">5.1. Sistema Completo (Nivel 1)</a></li>
<li><a href="#_nivel_2">5.2. Nivel 2</a></li>
<li><a href="#_nivel_3">5.3. Nivel 3</a></li>
</ul>
</li>
<li><a href="#section-runtime-view">6. Vista de Ejecución</a>
<ul class="sectlevel2">
<li><a href="#_registro_de_usuario">6.1. Registro de Usuario</a></li>
<li><a href="#_inicio_de_sesión">6.2. Inicio de Sesión</a></li>
<li><a href="#_jugar_una_partida">6.3. Jugar una Partida</a></li>
<li><a href="#_solicitar_pista_con_ia">6.4. Solicitar Pista con IA</a></li>
<li><a href="#_ver_estadísticas">6.5. Ver Estadísticas</a></li>
<li><a href="#_gestión_de_usuarios_admin">6.6. Gestión de Usuarios (Admin)</a></li>
</ul>
</li>
<li><a href="#section-deployment-view">7. Vista de Despliegue</a>
<ul class="sectlevel2">
<li><a href="#_infraestructura_de_despliegue">7.1. Infraestructura de Despliegue</a></li>
</ul>
</li>
<li><a href="#section-concepts">8. Conceptos Transversales</a>
<ul class="sectlevel2">
<li><a href="#_seguridad">8.1. Seguridad</a></li>
<li><a href="#_comunicación">8.2. Comunicación</a></li>
<li><a href="#_gestión_de_datos">8.3. Gestión de Datos</a></li>
<li><a href="#_experiencia_de_usuario">8.4. Experiencia de Usuario</a></li>
<li><a href="#_testing">8.5. Testing</a></li>
<li><a href="#_escalabilidad">8.6. Escalabilidad</a></li>
<li><a href="#_integraciones_externas">8.7. Integraciones Externas</a></li>
<li><a href="#_mantenibilidad">8.8. Mantenibilidad</a></li>
</ul>
</li>
<li><a href="#section-design-decisions">9. Decisiones de Arquitectura</a>
<ul class="sectlevel2">
<li><a href="#_arquitectura_de_microservicios_2">9.1. Arquitectura de Microservicios</a></li>
<li><a href="#_mongodb_como_base_de_datos">9.2. MongoDB como Base de Datos</a></li>
<li><a href="#_react_material_ui_para_frontend">9.3. React + Material-UI para Frontend</a></li>
<li><a href="#_gateway_como_punto_único_de_entrada">9.4. Gateway como Punto Único de Entrada</a></li>
<li><a href="#_integración_con_gemini_api">9.5. Integración con Gemini API</a></li>
<li><a href="#_almacenamiento_de_preguntas_generadas">9.6. Almacenamiento de Preguntas Generadas</a></li>
<li><a href="#_testing_exhaustivo">9.7. Testing Exhaustivo</a></li>
<li><a href="#_interfaz_en_español">9.8. Interfaz en Español</a></li>
<li><a href="#_sistema_de_hints_con_historial_de_conversación">9.9. Sistema de Hints con Historial de Conversación</a></li>
</ul>
</li>
<li><a href="#section-quality-scenarios">10. Requisitos de Calidad</a>
<ul class="sectlevel2">
<li><a href="#_árbol_de_calidad">10.1. Árbol de Calidad</a></li>
<li><a href="#_escenarios_de_calidad">10.2. Escenarios de Calidad</a></li>
</ul>
</li>
<li><a href="#section-technical-risks">11. Riesgos y Deudas Técnicas</a>
<ul class="sectlevel2">
<li><a href="#_riesgos_técnicos">11.1. Riesgos Técnicos</a></li>
<li><a href="#_deudas_técnicas">11.2. Deudas Técnicas</a></li>
</ul>
</li>
<li><a href="#section-glossary">12. Glosario</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<style>
.arc42help {font-size:small; width: 14px; height: 16px; overflow: hidden; position: absolute; right: 0; padding: 2px 0 3px 2px;}
.arc42help::before {content: "?";}
.arc42help:hover {width:auto; height: auto; z-index: 100; padding: 10px;}
.arc42help:hover::before {content: "";}
@media print {
	.arc42help {display:none;}
}
</style>
<div class="paragraph">
<p><strong>About arc42</strong></p>
</div>
<div class="paragraph lead">
<p>arc42, the template for documentation of software and system architecture.</p>
</div>
<div class="paragraph">
<p>Template Version 8.3 ES. (based upon AsciiDoc version), Diciembre 2025</p>
</div>
<div class="paragraph">
<p>Created, maintained and &#169; by Dr. Peter Hruschka, Dr. Gernot Starke and contributors.
See <a href="https://arc42.org" class="bare">https://arc42.org</a>.</p>
</div>
<hr>
<div class="sidebarblock arc42help">
<div class="content">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>This version of the template contains some help and explanations.
It is used for familiarization with arc42 and the understanding of the concepts.
For documentation of your own system you use better the <em>plain</em> version.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="section-introduction-and-goals">1. Introducción y Objetivos</h2>
<div class="sectionbody">
<div class="paragraph">
<p>El proyecto WIChat es una iniciativa desarrollada en la Universidad de Oviedo con el objetivo de crear una versión en línea del concurso de preguntas y respuestas “Saber y Ganar" a petición de la empresa de software ChattySW, por encargo de RTVE,</p>
</div>
<div class="paragraph">
<p>La desarrolladora de este proyecto será realizado por:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Sara Inés Bolado</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>En la web, los usuarios podrán registrarse y participar en un juego de preguntas. Les aparecerá una pregunta con una imagen asociada y tendrán 4 posibles respuestas para responder en un tiempo limitado</p>
</div>
<div class="sect2">
<h3 id="_requisitos">1.1. Requisitos</h3>
<div class="ulist">
<ul>
<li>
<p>El sistema debe permitir a los usuarios nuevos registrarse en la aplicación.</p>
</li>
<li>
<p>El sistema debe permitir a los usuarios existentes iniciar sesión</p>
</li>
<li>
<p>El sistema debe permitir al administrador bloquear usuarios, modificar categorías y preguntas</p>
</li>
<li>
<p>Los usuarios registrados podrán jugar en la aplicación</p>
</li>
<li>
<p>Los usuarios registrados podrán acceder al historial de su participación.</p>
</li>
<li>
<p>El sistema deberá obtener la información de las preguntas (respuesta y distractores) de Wikidata.</p>
</li>
<li>
<p>El tiempo de respuesta será de 30 segundos por pregunta</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_objetivos_de_calidad">1.2. Objetivos de calidad</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Objetivo de calidad</th>
<th class="tableblock halign-left valign-top">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Mantenibilidad</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">La aplicación contará con un diseño limpio y ordenado para facilitar la adición de funcionalidades. La documentación estará actualizada con todas las decisiones tomadas</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Testeabilidad</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">La aplicación deberá pasar varios tipos de pruebas diferentes para garantizar su calidad y buen funcionamiento</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Usabilidad</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">La aplicación deberá ser intuitiva y fácil de usar, para todos los usuarios.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_stakeholders">1.3. Stakeholders</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Rol</th>
<th class="tableblock halign-left valign-top">Nombre</th>
<th class="tableblock halign-left valign-top">Expectativas</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Equipo de desarrollo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sara Inés Bolado</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Desarrollar el sistema solicitado</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Usuarios</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Poder jugar en la web sin complicaciones.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Profesores</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jose Emilio Labra Gayo, Pablo González, Irene Cid Rico, Diego Martín Fernández</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Evaluar la web final y ayudar ante adversidades.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RTVE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Radiotelevisión Española</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Obtener una aplicación web acorde a lo solicitado.</p></td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-architecture-constraints">2. Restricciones arquitectónicas</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_restricciones_técnicas">2.1. Restricciones técnicas</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Restricción</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Descripción</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Documentación</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Se utilizará la plantilla Arc42.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Control de versiones</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Se utilizará Git y se alojará en GitHub.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Host</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Se desplegará en un host de Docker.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">API</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Se utilizará una API de WikiData para obtener la información de las preguntas (fotografía, respuesta correcta y distractores). API de Gemini para la interacción con el LLM.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pruebas de carga</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Se utilizará Gatling.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_restricciones_organizativas">2.2. Restricciones organizativas</h3>
<div class="paragraph">
<p>Al tratarse de un proyecto en forma individual no será necesario hacer reuniones ni tomar decisiones en equipo, por lo que trataré de ir registrando todo en issues y dividir el trabajo en secciones para ir realizando el software de forma incremental sin complicaciones.
En el caso de que alguien tuviera que editar este código todo estará bien estructurado y explicado para que no hubiera problemas.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-context-and-scope">3. Contexto y Alcance</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_contexto_empresarial">3.1. Contexto Empresarial</h3>
<div class="paragraph">
<p>El proyecto WIChat tiene como objetivo crear una versión en línea del concurso de preguntas y respuestas “Saber y Ganar" para RTVE. Deberá aparecer una pregunta con una imagen y 4 posibles respuestas para responder en un tiempo limitado</p>
</div>
</div>
<div class="sect2">
<h3 id="_contexto_técnico">3.2. Contexto técnico</h3>
<div class="sect3">
<h4 id="_3_2_1_alcance_del_sistema">3.2.1. 3.2.1. Alcance del Sistema</h4>
<div class="imageblock">
<div class="content">
<img src="./images/diagrama_wichat.png" alt="Diagrama de arquitectura del sistema">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>WIQ Webapp</strong>: Módulo que soporta la interacción del usuario a través de la interfaz de usuario.</p>
</li>
<li>
<p><strong>Question Generation Service</strong>: Servicio que se utiliza internamente para gestionar la recuperación de información desde Wikidata y el almacenamiento de preguntas en la base de datos.</p>
</li>
<li>
<p><strong>Gateway Service</strong>: Servicio Express que está expuesto al público y sirve como proxy para la gestión de usuarios, permitiendo el registro e inicio de sesión.</p>
</li>
<li>
<p><strong>User Service</strong>: Servicio Express que maneja la inserción de nuevos usuarios en el sistema.</p>
</li>
<li>
<p><strong>Auth Service</strong>: Servicio Express que maneja la autenticación de usuarios.</p>
</li>
<li>
<p><strong>LLM Service</strong>: Servicio que proporciona pistas generadas por IA utilizando la API de Gemini para ayudar a los jugadores durante las partidas.</p>
</li>
</ul>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-solution-strategy">4. Estrategia de Solución</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_decisiones_tecnológicas">4.1. Decisiones Tecnológicas</h3>
<div class="ulist">
<ul>
<li>
<p><strong>Arquitectura de Microservicios</strong>: Se optó por dividir el sistema en servicios independientes (Gateway, Auth, User, Question, LLM) para facilitar el desarrollo en equipo y el mantenimiento.</p>
</li>
<li>
<p><strong>MongoDB</strong>: Base de datos NoSQL elegida por su flexibilidad para almacenar diferentes tipos de datos (usuarios, preguntas, historial) y facilidad de integración con Node.js.</p>
</li>
<li>
<p><strong>React + Material-UI</strong>: Framework frontend moderno que permite crear interfaces interactivas y responsivas de forma rápida, con componentes visuales predefinidos.</p>
</li>
<li>
<p><strong>APIs Externas</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>Wikidata para obtener datos de trivia actualizados</p>
</li>
<li>
<p>Gemini API para generar pistas inteligentes mediante IA</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_decisiones_de_alto_nivel">4.2. Decisiones de Alto Nivel</h3>
<div class="ulist">
<ul>
<li>
<p><strong>Gateway como punto único de entrada</strong>: Centraliza las peticiones del frontend y gestiona el enrutamiento a los servicios correspondientes, simplificando la comunicación.</p>
</li>
<li>
<p><strong>Separación de servicios de autenticación y usuarios</strong>: Permite gestionar de forma independiente la validación de credenciales (Auth) y la información de usuarios (User).</p>
</li>
<li>
<p><strong>Sistema de pistas con IA</strong>: Se integró un servicio LLM separado para no sobrecargar otros servicios y poder escalar la funcionalidad de hints de forma independiente.</p>
</li>
<li>
<p><strong>Testing exhaustivo</strong>: Se priorizó alcanzar máxima cobertura de tests (unitarios con Jest y E2E con Puppeteer/Cucumber) para garantizar la calidad del código.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_estructura_del_sistema">4.3. Estructura del Sistema</h3>
<div class="paragraph">
<p>La aplicación sigue un patrón cliente-servidor con arquitectura de microservicios:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>El <strong>frontend</strong> (React) se comunica únicamente con los servicios backend a través de HTTP</p>
</li>
<li>
<p>El <strong>Gateway</strong> actúa como orquestador entre el frontend y los servicios internos</p>
</li>
<li>
<p>Los <strong>servicios</strong> son independientes pero comparten la misma base de datos MongoDB</p>
</li>
<li>
<p>Las <strong>APIs externas</strong> se consultan bajo demanda para obtener datos frescos</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_calidad">4.4. Calidad</h3>
<div class="ulist">
<ul>
<li>
<p><strong>Mantenibilidad</strong>: La separación en microservicios permite modificar componentes sin afectar al resto del sistema</p>
</li>
<li>
<p><strong>Testabilidad</strong>: Arquitectura diseñada para facilitar pruebas unitarias y de integración</p>
</li>
<li>
<p><strong>Escalabilidad</strong>: Cada servicio puede escalarse de forma independiente según la demanda</p>
</li>
<li>
<p><strong>Usabilidad</strong>: Interfaz intuitiva en español con Material-UI, sistema de pistas para ayudar a los jugadores</p>
</li>
</ul>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-building-block-view">5. Vista de Bloques de Construcción</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_sistema_completo_nivel_1">5.1. Sistema Completo (Nivel 1)</h3>
<div class="paragraph">
<p>El sistema WIChat está compuesto por los siguientes bloques principales:</p>
</div>
<div class="sidebarblock arc42help">
<div class="content">
<div class="paragraph">
<div class="title">Contenido</div>
<p>Visión general del sistema completo mostrando los bloques principales y sus relaciones.</p>
</div>
<div class="paragraph">
<div class="title">Motivación</div>
<p>Proporciona una visión de alto nivel de la estructura del sistema para facilitar la comprensión de los componentes principales.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_diagrama_de_nivel_1">5.1.1. Diagrama de Nivel 1</h4>
<div class="imageblock">
<div class="content">
<img src="./images/diagrama_wichat.png" alt="Diagrama de arquitectura del sistema">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_bloques_del_sistema">5.1.2. Bloques del Sistema</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Bloque</th>
<th class="tableblock halign-left valign-top">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>WIQ Webapp</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aplicación web desarrollada en React con Material-UI. Interfaz de usuario que permite jugar, ver estadísticas y obtener pistas mediante chat con IA.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Gateway Service</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Punto de entrada del sistema. Orquesta las peticiones entre el frontend y los servicios backend de autenticación y usuarios.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Auth Service</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gestiona la autenticación de usuarios mediante validación de credenciales y generación de tokens JWT.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>User Service</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maneja el registro de nuevos usuarios y almacenamiento de información personal y estadísticas de juego.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Question Generation Service</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Obtiene datos de Wikidata, genera preguntas de trivia para las tres categorías (Capitales, Banderas, Monumentos) y las almacena en MongoDB.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>LLM Service</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Proporciona pistas generadas por IA usando Gemini API para ayudar a los jugadores durante las partidas.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>MongoDB</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Base de datos que almacena usuarios, preguntas generadas e historial de partidas.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Wikidata</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">API externa de donde se obtienen los datos para generar las preguntas de trivia.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Gemini API</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">API de Google que proporciona el modelo de IA para generar pistas contextuales.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_nivel_2">5.2. Nivel 2</h3>
<div class="sect3">
<h4 id="_frontend_wiq_webapp">5.2.1. Frontend (WIQ Webapp)</h4>
<div class="paragraph">
<p>El frontend está estructurado en componentes React que gestionan diferentes funcionalidades:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Componente</th>
<th class="tableblock halign-left valign-top">Responsabilidad</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Componentes de Autenticación</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Login y registro de usuarios</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Componentes de Juego</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Visualización de preguntas, opciones y validación de respuestas para cada categoría</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Sistema de Pistas</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Chat que permite solicitar hints al LLM Service durante el juego</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Panel de Estadísticas</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Visualización de gráficos y datos del rendimiento del usuario (usando recharts)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Panel de Administración</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gestión de usuarios y visualización de estadísticas globales (solo admins)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_backend_services">5.2.2. Backend Services</h4>
<div class="sect4">
<h5 id="_gateway_service">Gateway Service</h5>
<div class="paragraph">
<p>Responsabilidades:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Recibir todas las peticiones del frontend</p>
</li>
<li>
<p>Enrutar solicitudes de autenticación al Auth Service</p>
</li>
<li>
<p>Enrutar solicitudes de gestión de usuarios al User Service</p>
</li>
<li>
<p>Gestionar CORS y configuración de seguridad</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_auth_service">Auth Service</h5>
<div class="paragraph">
<p>Responsabilidades:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Validar credenciales de usuario contra MongoDB</p>
</li>
<li>
<p>Generar tokens JWT para sesiones autenticadas</p>
</li>
<li>
<p>Verificar tokens en peticiones protegidas</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_user_service">User Service</h5>
<div class="paragraph">
<p>Responsabilidades:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Registrar nuevos usuarios en MongoDB</p>
</li>
<li>
<p>Almacenar y actualizar historial de partidas</p>
</li>
<li>
<p>Proporcionar datos para estadísticas de usuario</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_question_generation_service">Question Generation Service</h5>
<div class="paragraph">
<p>Responsabilidades:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Consultar Wikidata para obtener datos actualizados</p>
</li>
<li>
<p>Generar preguntas con opciones múltiples</p>
</li>
<li>
<p>Almacenar preguntas en MongoDB</p>
</li>
<li>
<p>Servir preguntas al frontend según categoría solicitada</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_llm_service">LLM Service</h5>
<div class="paragraph">
<p>Responsabilidades:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Recibir contexto de la pregunta actual</p>
</li>
<li>
<p>Construir prompts adecuados para Gemini API</p>
</li>
<li>
<p>Gestionar la conversación y proporcionar pistas sin revelar la respuesta directamente</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_nivel_3">5.3. Nivel 3</h3>
<div class="paragraph">
<p>Para esta aplicación, el nivel 2 proporciona suficiente detalle sobre la estructura interna de cada servicio. Cada microservicio sigue una arquitectura estándar de Express con:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Rutas (routes): Definen los endpoints disponibles</p>
</li>
<li>
<p>Controladores (controllers): Lógica de negocio de cada endpoint</p>
</li>
<li>
<p>Modelos (models): Esquemas de MongoDB</p>
</li>
<li>
<p>Servicios auxiliares: Funciones de utilidad y llamadas a APIs externas</p>
</li>
</ul>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-runtime-view">6. Vista de Ejecución</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_registro_de_usuario">6.1. Registro de Usuario</h3>
<div class="paragraph">
<p>Escenario que describe cómo un nuevo usuario se registra en el sistema.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/registro-usuario.png" alt="registro usuario" width="640" height="442">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_inicio_de_sesión">6.2. Inicio de Sesión</h3>
<div class="paragraph">
<p>Escenario que describe el proceso de autenticación de un usuario.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/login-usuario.png" alt="login usuario" width="649" height="486">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_jugar_una_partida">6.3. Jugar una Partida</h3>
<div class="paragraph">
<p>Escenario principal del juego donde el usuario responde preguntas.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/jugar-partida.png" alt="jugar partida" width="739" height="762">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_solicitar_pista_con_ia">6.4. Solicitar Pista con IA</h3>
<div class="paragraph">
<p>Escenario donde el usuario pide ayuda mediante el sistema de hints.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/solicitar-pista.png" alt="solicitar pista" width="657" height="494">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_ver_estadísticas">6.5. Ver Estadísticas</h3>
<div class="paragraph">
<p>Escenario donde un usuario consulta sus estadísticas de juego.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/ver-estadisticas.png" alt="ver estadisticas" width="649" height="468">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_gestión_de_usuarios_admin">6.6. Gestión de Usuarios (Admin)</h3>
<div class="paragraph">
<p>Escenario donde un administrador gestiona usuarios del sistema.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/admin-gestion.png" alt="admin gestion" width="664" height="778">
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-deployment-view">7. Vista de Despliegue</h2>
<div class="sectionbody">
<div class="sidebarblock arc42help">
<div class="content">
<div class="paragraph">
<div class="title">Contenido</div>
<p>Describe el entorno técnico donde se ejecuta el sistema, incluyendo infraestructura, máquinas y configuración de red.</p>
</div>
<div class="paragraph">
<div class="title">Motivación</div>
<p>El software no funciona sin hardware. Esta vista muestra el entorno físico o virtual necesario para ejecutar la aplicación.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_infraestructura_de_despliegue">7.1. Infraestructura de Despliegue</h3>
<div class="sect3">
<h4 id="_entorno_de_desarrollo">7.1.1. Entorno de Desarrollo</h4>
<div class="paragraph">
<p>El sistema se ejecuta localmente durante el desarrollo con la siguiente configuración:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/deployment-dev.png" alt="deployment dev" width="805" height="558">
</div>
</div>
<div class="paragraph">
<p><strong>Descripción:</strong>
* Todos los servicios se ejecutan localmente en la misma máquina
* Cada servicio usa un puerto diferente para evitar conflictos
* MongoDB se ejecuta como proceso local en el puerto por defecto
* Las APIs externas se acceden vía HTTPS</p>
</div>
</div>
<div class="sect3">
<h4 id="_entorno_de_testing">7.1.2. Entorno de Testing</h4>
<div class="paragraph">
<p>Durante la ejecución de tests:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Tests Unitarios (Jest)</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>Usan mongodb-memory-server para simular MongoDB en memoria</p>
</li>
<li>
<p>No requieren servicios externos activos</p>
</li>
<li>
<p>Se ejecutan de forma aislada para cada microservicio</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Tests E2E (Puppeteer + Cucumber)</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>Requieren todos los servicios ejecutándose localmente</p>
</li>
<li>
<p>MongoDB debe estar activo con datos de prueba</p>
</li>
<li>
<p>Puppeteer controla un navegador Chrome headless</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_configuración_de_red">7.1.3. Configuración de Red</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Servicio</th>
<th class="tableblock halign-left valign-top">Puerto</th>
<th class="tableblock halign-left valign-top">URL Local</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Frontend</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://localhost:3000" class="bare">http://localhost:3000</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gateway</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://localhost:8000" class="bare">http://localhost:8000</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Auth Service</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8001</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://localhost:8001" class="bare">http://localhost:8001</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Service</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8002</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://localhost:8002" class="bare">http://localhost:8002</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Question Service</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8003</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://localhost:8003" class="bare">http://localhost:8003</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LLM Service</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8004</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://localhost:8004" class="bare">http://localhost:8004</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MongoDB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">27017</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">mongodb://localhost:27017</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_variables_de_entorno">7.1.4. Variables de Entorno</h4>
<div class="paragraph">
<p>Cada servicio requiere configuración mediante variables de entorno:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>MONGODB_URI</strong>: Cadena de conexión a MongoDB</p>
</li>
<li>
<p><strong>JWT_SECRET</strong>: Clave secreta para firmar tokens JWT</p>
</li>
<li>
<p><strong>GEMINI_API_KEY</strong>: Clave de API para acceder a Gemini</p>
</li>
<li>
<p><strong>PORT</strong>: Puerto donde se ejecuta cada servicio</p>
</li>
<li>
<p><strong>CORS_ORIGIN</strong>: Origen permitido para peticiones CORS</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_requisitos_del_sistema">7.1.5. Requisitos del Sistema</h4>
<div class="paragraph">
<p><strong>Hardware mínimo:</strong>
* CPU: 2 cores
* RAM: 4 GB
* Disco: 2 GB disponibles</p>
</div>
<div class="paragraph">
<p><strong>Software necesario:</strong>
* Node.js 18 o superior
* MongoDB 6.0 o superior
* npm o yarn para gestión de dependencias
* Navegador web moderno (Chrome, Firefox, Edge)</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-concepts">8. Conceptos Transversales</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_seguridad">8.1. Seguridad</h3>
<div class="sect3">
<h4 id="_autenticación">8.1.1. Autenticación</h4>
<div class="ulist">
<ul>
<li>
<p>El sistema utiliza <strong>JWT (JSON Web Tokens)</strong> para gestionar sesiones de usuario</p>
</li>
<li>
<p>Las contraseñas se almacenan <strong>hasheadas</strong> en MongoDB (nunca en texto plano)</p>
</li>
<li>
<p>El Auth Service valida credenciales y genera tokens que expiran tras un tiempo determinado</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_autorización">8.1.2. Autorización</h4>
<div class="ulist">
<ul>
<li>
<p>Existen dos roles: <strong>usuario regular</strong> y <strong>administrador</strong></p>
</li>
<li>
<p>Los administradores tienen acceso a funciones adicionales:</p>
<div class="ulist">
<ul>
<li>
<p>Visualización de estadísticas globales</p>
</li>
<li>
<p>Gestión de usuarios (bloquear/desbloquear)</p>
</li>
<li>
<p>Acceso a panel de administración</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_cors">8.1.3. CORS</h4>
<div class="ulist">
<ul>
<li>
<p>El Gateway Service configura CORS para permitir peticiones solo desde el frontend</p>
</li>
<li>
<p>Previene accesos no autorizados desde otros orígenes</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_comunicación">8.2. Comunicación</h3>
<div class="sect3">
<h4 id="_api_rest">8.2.1. API REST</h4>
<div class="ulist">
<ul>
<li>
<p>Todos los servicios exponen endpoints REST usando Express.js</p>
</li>
<li>
<p>Formato de intercambio de datos: <strong>JSON</strong></p>
</li>
<li>
<p>Uso de métodos HTTP estándar:</p>
<div class="ulist">
<ul>
<li>
<p>GET: Obtener datos</p>
</li>
<li>
<p>POST: Crear recursos o autenticar</p>
</li>
<li>
<p>PUT: Actualizar recursos</p>
</li>
<li>
<p>DELETE: Eliminar recursos (si aplica)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_gestión_de_errores">8.2.2. Gestión de Errores</h4>
<div class="ulist">
<ul>
<li>
<p>Códigos de estado HTTP apropiados:</p>
<div class="ulist">
<ul>
<li>
<p>200: Éxito</p>
</li>
<li>
<p>400: Error en petición del cliente</p>
</li>
<li>
<p>401: No autenticado</p>
</li>
<li>
<p>403: No autorizado</p>
</li>
<li>
<p>404: Recurso no encontrado</p>
</li>
<li>
<p>500: Error del servidor</p>
</li>
</ul>
</div>
</li>
<li>
<p>Mensajes de error descriptivos en español</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_gestión_de_datos">8.3. Gestión de Datos</h3>
<div class="sect3">
<h4 id="_base_de_datos">8.3.1. Base de Datos</h4>
<div class="ulist">
<ul>
<li>
<p><strong>MongoDB</strong> como base de datos NoSQL compartida por todos los servicios</p>
</li>
<li>
<p>Colecciones principales:</p>
<div class="ulist">
<ul>
<li>
<p>users: Información de usuarios y credenciales</p>
</li>
<li>
<p>questions: Preguntas generadas para cada categoría</p>
</li>
<li>
<p>gameHistory: Historial de partidas jugadas</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_persistencia">8.3.2. Persistencia</h4>
<div class="ulist">
<ul>
<li>
<p>Cada servicio interactúa con MongoDB usando Mongoose (ODM)</p>
</li>
<li>
<p>Los esquemas definen la estructura de datos esperada</p>
</li>
<li>
<p>Validación de datos a nivel de modelo antes de guardar</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_experiencia_de_usuario">8.4. Experiencia de Usuario</h3>
<div class="sect3">
<h4 id="_interfaz">8.4.1. Interfaz</h4>
<div class="ulist">
<ul>
<li>
<p>Diseño <strong>responsive</strong> que se adapta a diferentes tamaños de pantalla</p>
</li>
<li>
<p>Uso de <strong>Material-UI</strong> para componentes consistentes y profesionales</p>
</li>
<li>
<p>Idioma: <strong>Español</strong> en toda la interfaz</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_feedback">8.4.2. Feedback</h4>
<div class="ulist">
<ul>
<li>
<p>Mensajes de confirmación para acciones importantes (registro, respuestas)</p>
</li>
<li>
<p>Indicadores visuales de carga durante peticiones al servidor</p>
</li>
<li>
<p>Validación de formularios en tiempo real</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_sistema_de_pistas">8.4.3. Sistema de Pistas</h4>
<div class="ulist">
<ul>
<li>
<p>Chat integrado que mantiene conversación contextual</p>
</li>
<li>
<p>Historial de chat visible durante cada pregunta</p>
</li>
<li>
<p>El historial se reinicia al cambiar de pregunta</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_testing">8.5. Testing</h3>
<div class="sect3">
<h4 id="_tests_unitarios">8.5.1. Tests Unitarios</h4>
<div class="ulist">
<ul>
<li>
<p><strong>Jest</strong> y <strong>Supertest</strong> para probar servicios backend</p>
</li>
<li>
<p><strong>mongodb-memory-server</strong> para simular MongoDB sin dependencias externas</p>
</li>
<li>
<p>Objetivo: Máxima cobertura de código</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_tests_e2e">8.5.2. Tests E2E</h4>
<div class="ulist">
<ul>
<li>
<p><strong>Puppeteer</strong> para automatizar navegador</p>
</li>
<li>
<p><strong>Cucumber</strong> con sintaxis Gherkin para escenarios de usuario</p>
</li>
<li>
<p>Uso de data-testid para seleccionar elementos de forma confiable</p>
</li>
<li>
<p>Escenarios cubiertos:</p>
<div class="ulist">
<ul>
<li>
<p>Registro e inicio de sesión</p>
</li>
<li>
<p>Juego completo en todas las categorías</p>
</li>
<li>
<p>Visualización de estadísticas</p>
</li>
<li>
<p>Funciones de administrador</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_escalabilidad">8.6. Escalabilidad</h3>
<div class="sect3">
<h4 id="_arquitectura_de_microservicios">8.6.1. Arquitectura de Microservicios</h4>
<div class="ulist">
<ul>
<li>
<p>Cada servicio puede escalarse de forma independiente</p>
</li>
<li>
<p>Separación de responsabilidades facilita el mantenimiento</p>
</li>
<li>
<p>Posibilidad de desplegar servicios en contenedores Docker</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_gestión_de_carga">8.6.2. Gestión de Carga</h4>
<div class="ulist">
<ul>
<li>
<p>El Question Service almacena preguntas generadas para reutilizarlas</p>
</li>
<li>
<p>Reduce llamadas repetidas a Wikidata</p>
</li>
<li>
<p>El sistema de hints utiliza un modelo optimizado (gemini-2.0-flash)</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_integraciones_externas">8.7. Integraciones Externas</h3>
<div class="sect3">
<h4 id="_wikidata">8.7.1. Wikidata</h4>
<div class="ulist">
<ul>
<li>
<p>Fuente de datos para generar preguntas de trivia</p>
</li>
<li>
<p>Consultas mediante SPARQL o API REST</p>
</li>
<li>
<p>Datos actualizados de capitales, banderas y monumentos</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_gemini_api">8.7.2. Gemini API</h4>
<div class="ulist">
<ul>
<li>
<p>Modelo de IA: <strong>gemini-2.0-flash</strong></p>
</li>
<li>
<p>Genera pistas contextuales sin revelar respuestas directamente</p>
</li>
<li>
<p>Mantiene conversación natural con el usuario</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_mantenibilidad">8.8. Mantenibilidad</h3>
<div class="sect3">
<h4 id="_organización_del_código">8.8.1. Organización del Código</h4>
<div class="ulist">
<ul>
<li>
<p>Estructura clara por servicio con carpetas separadas</p>
</li>
<li>
<p>Cada microservicio tiene su propio package.json y dependencias</p>
</li>
<li>
<p>Código modular con separación de rutas, controladores y modelos</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_documentación">8.8.2. Documentación</h4>
<div class="ulist">
<ul>
<li>
<p>Documentación Arc42 para arquitectura</p>
</li>
<li>
<p>Comentarios en código para lógica compleja</p>
</li>
<li>
<p>README con instrucciones de instalación y ejecución</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_control_de_versiones">8.8.3. Control de Versiones</h4>
<div class="ulist">
<ul>
<li>
<p>Uso de Git para control de versiones</p>
</li>
<li>
<p>Repositorio organizado con código fuente y documentación</p>
</li>
</ul>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-design-decisions">9. Decisiones de Arquitectura</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_arquitectura_de_microservicios_2">9.1. Arquitectura de Microservicios</h3>
<div class="paragraph">
<p><strong>Decisión:</strong> Dividir el sistema en cinco servicios backend independientes (Gateway, Auth, User, Question, LLM).</p>
</div>
<div class="paragraph">
<p><strong>Razón:</strong> Facilita el desarrollo en equipo al permitir trabajar en servicios diferentes simultáneamente. Simplifica el testing al poder probar cada servicio de forma aislada.</p>
</div>
<div class="paragraph">
<p><strong>Consecuencias:</strong> Requiere gestionar múltiples procesos durante desarrollo. Mayor complejidad en coordinación entre servicios.</p>
</div>
</div>
<div class="sect2">
<h3 id="_mongodb_como_base_de_datos">9.2. MongoDB como Base de Datos</h3>
<div class="paragraph">
<p><strong>Decisión:</strong> Usar MongoDB compartida por todos los servicios en lugar de bases de datos separadas.</p>
</div>
<div class="paragraph">
<p><strong>Razón:</strong> Simplicidad en la gestión de datos. Flexibilidad para almacenar diferentes estructuras (usuarios, preguntas, historial). Fácil integración con Node.js mediante Mongoose.</p>
</div>
<div class="paragraph">
<p><strong>Consecuencias:</strong> Todos los servicios dependen de la misma instancia de MongoDB. No hay aislamiento completo de datos entre servicios.</p>
</div>
</div>
<div class="sect2">
<h3 id="_react_material_ui_para_frontend">9.3. React + Material-UI para Frontend</h3>
<div class="paragraph">
<p><strong>Decisión:</strong> Desarrollar la interfaz con React y Material-UI.</p>
</div>
<div class="paragraph">
<p><strong>Razón:</strong> React permite crear interfaces dinámicas e interactivas. Material-UI proporciona componentes visuales profesionales que aceleran el desarrollo. Amplia documentación y comunidad.</p>
</div>
<div class="paragraph">
<p><strong>Consecuencias:</strong> Curva de aprendizaje para el equipo. Dependencia de librerías externas.</p>
</div>
</div>
<div class="sect2">
<h3 id="_gateway_como_punto_único_de_entrada">9.4. Gateway como Punto Único de Entrada</h3>
<div class="paragraph">
<p><strong>Decisión:</strong> Centralizar peticiones de autenticación y usuarios a través del Gateway Service.</p>
</div>
<div class="paragraph">
<p><strong>Razón:</strong> Simplifica la configuración de CORS. Permite agregar lógica común (logging, validación) en un solo punto. Oculta la complejidad interna al frontend.</p>
</div>
<div class="paragraph">
<p><strong>Consecuencias:</strong> El Gateway puede convertirse en cuello de botella. Punto único de fallo si no se gestiona adecuadamente.</p>
</div>
</div>
<div class="sect2">
<h3 id="_integración_con_gemini_api">9.5. Integración con Gemini API</h3>
<div class="paragraph">
<p><strong>Decisión:</strong> Crear un servicio LLM separado que use Gemini API para generar pistas.</p>
</div>
<div class="paragraph">
<p><strong>Razón:</strong> Cumplir con el requisito del proyecto de integrar un LLM. Separar esta funcionalidad permite escalarla o cambiarla independientemente. Gemini ofrece un modelo gratuito y rápido (gemini-2.0-flash).</p>
</div>
<div class="paragraph">
<p><strong>Consecuencias:</strong> Dependencia de API externa. Requiere gestión de claves API y límites de uso.</p>
</div>
</div>
<div class="sect2">
<h3 id="_almacenamiento_de_preguntas_generadas">9.6. Almacenamiento de Preguntas Generadas</h3>
<div class="paragraph">
<p><strong>Decisión:</strong> Guardar las preguntas obtenidas de Wikidata en MongoDB.</p>
</div>
<div class="paragraph">
<p><strong>Razón:</strong> Reduce llamadas repetidas a Wikidata. Mejora el rendimiento del juego. Permite reutilizar preguntas entre diferentes partidas.</p>
</div>
<div class="paragraph">
<p><strong>Consecuencias:</strong> Necesidad de actualizar periódicamente las preguntas para mantener datos frescos.</p>
</div>
</div>
<div class="sect2">
<h3 id="_testing_exhaustivo">9.7. Testing Exhaustivo</h3>
<div class="paragraph">
<p><strong>Decisión:</strong> Implementar tests unitarios con Jest y E2E con Puppeteer/Cucumber para lograr máxima cobertura.</p>
</div>
<div class="paragraph">
<p><strong>Razón:</strong> Requisito del proyecto académico. Garantiza calidad del código. Facilita detectar errores antes del despliegue. Permite refactorizar con confianza.</p>
</div>
<div class="paragraph">
<p><strong>Consecuencias:</strong> Mayor tiempo de desarrollo inicial. Necesidad de mantener los tests actualizados con los cambios.</p>
</div>
</div>
<div class="sect2">
<h3 id="_interfaz_en_español">9.8. Interfaz en Español</h3>
<div class="paragraph">
<p><strong>Decisión:</strong> Desarrollar toda la interfaz y mensajes en español.</p>
</div>
<div class="paragraph">
<p><strong>Razón:</strong> El proyecto está destinado a RTVE (España). Simplifica el desarrollo al no requerir internacionalización. El equipo y usuarios son hispanohablantes.</p>
</div>
<div class="paragraph">
<p><strong>Consecuencias:</strong> Limita la audiencia potencial a usuarios que hablen español.</p>
</div>
</div>
<div class="sect2">
<h3 id="_sistema_de_hints_con_historial_de_conversación">9.9. Sistema de Hints con Historial de Conversación</h3>
<div class="paragraph">
<p><strong>Decisión:</strong> Mantener el historial del chat de pistas en el estado de React, reiniciándolo al cambiar de pregunta.</p>
</div>
<div class="paragraph">
<p><strong>Razón:</strong> Proporciona contexto a la IA para generar mejores pistas. Permite al usuario ver la conversación completa. Simplicidad al no requerir persistencia en backend.</p>
</div>
<div class="paragraph">
<p><strong>Consecuencias:</strong> El historial se pierde si se recarga la página. Consumo de memoria en el navegador durante partidas largas.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-quality-scenarios">10. Requisitos de Calidad</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_árbol_de_calidad">10.1. Árbol de Calidad</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Característica de Calidad</th>
<th class="tableblock halign-left valign-top">Aspectos Relevantes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Funcionalidad</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Correctitud de respuestas, integración con APIs externas, sistema de pistas funcional</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Fiabilidad</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Manejo de errores, disponibilidad de servicios, recuperación ante fallos</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Usabilidad</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Interfaz intuitiva, mensajes claros, experiencia de usuario fluida</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Eficiencia</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tiempos de respuesta rápidos, uso optimizado de APIs externas</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Mantenibilidad</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Código modular, documentación clara, facilidad para añadir nuevas funcionalidades</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Portabilidad</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ejecución en diferentes sistemas operativos, fácil instalación</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Testeabilidad</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cobertura de tests alta, tests automatizados, aislamiento de componentes</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_escenarios_de_calidad">10.2. Escenarios de Calidad</h3>
<div class="sect3">
<h4 id="_funcionalidad">10.2.1. Funcionalidad</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Escenario</th>
<th class="tableblock halign-left valign-top">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">F1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">El sistema debe validar correctamente las respuestas del usuario comparándolas con la respuesta correcta almacenada en la pregunta</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">F2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">El sistema de pistas debe proporcionar ayuda relevante sin revelar directamente la respuesta correcta</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">F3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Las preguntas deben generarse correctamente desde Wikidata con imágenes y opciones múltiples válidas</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_usabilidad">10.2.2. Usabilidad</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Escenario</th>
<th class="tableblock halign-left valign-top">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">U1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Un usuario nuevo debe poder registrarse y comenzar a jugar en menos de 2 minutos</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">U2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Los mensajes de error deben ser claros y en español, indicando qué acción tomar</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">U3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">La interfaz debe ser responsive y funcionar correctamente en dispositivos móviles y desktop</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">U4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">El chat de pistas debe mostrar claramente quién habla (usuario o IA) y mantener el historial visible</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_fiabilidad">10.2.3. Fiabilidad</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Escenario</th>
<th class="tableblock halign-left valign-top">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">R1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Si Wikidata no responde, el sistema debe usar preguntas previamente almacenadas en MongoDB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">R2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Si Gemini API falla, el sistema debe informar al usuario que las pistas no están disponibles temporalmente</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">R3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Los servicios deben manejar errores de conexión a MongoDB sin provocar caídas del sistema</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_eficiencia">10.2.4. Eficiencia</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Escenario</th>
<th class="tableblock halign-left valign-top">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">E1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Las preguntas deben cargarse en menos de 2 segundos en condiciones normales de red</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">E2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">El sistema debe reutilizar preguntas almacenadas para evitar consultas repetidas a Wikidata</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">E3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Las pistas de IA deben generarse en menos de 5 segundos</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_mantenibilidad_2">10.2.5. Mantenibilidad</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Escenario</th>
<th class="tableblock halign-left valign-top">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">M1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Añadir una nueva categoría de preguntas debe requerir cambios solo en el Question Service y componentes frontend relacionados</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">M2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cada microservicio debe poder ejecutarse y probarse de forma independiente</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">M3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">El código debe seguir una estructura consistente para facilitar la incorporación de nuevos desarrolladores</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_testeabilidad">10.2.6. Testeabilidad</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Escenario</th>
<th class="tableblock halign-left valign-top">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">T1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Todos los servicios backend deben tener tests unitarios con cobertura superior al 80%</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">T2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Los tests E2E deben cubrir los flujos principales: registro, login, juego, estadísticas</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">T3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Los tests deben ejecutarse de forma automatizada y aislada usando mongodb-memory-server</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_portabilidad">10.2.7. Portabilidad</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Escenario</th>
<th class="tableblock halign-left valign-top">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">P1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">El sistema debe poder ejecutarse en Windows, Linux y macOS con Node.js y MongoDB instalados</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">P2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Las instrucciones de instalación deben permitir a un desarrollador nuevo poner el sistema en marcha en menos de 15 minutos</p></td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-technical-risks">11. Riesgos y Deudas Técnicas</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_riesgos_técnicos">11.1. Riesgos Técnicos</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 50%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Riesgo</th>
<th class="tableblock halign-left valign-top">Descripción</th>
<th class="tableblock halign-left valign-top">Probabilidad</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Dependencia de APIs Externas</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Si Wikidata o Gemini API caen o cambian su funcionamiento, partes del sistema dejarían de funcionar.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Media</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Base de Datos Compartida</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Un fallo en MongoDB afecta a todos los servicios simultáneamente. No hay aislamiento de datos.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Media</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Gateway como Punto Único de Fallo</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Si el Gateway Service cae, la autenticación y creación de usuarios no funcionan.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Media</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Límites de API de Gemini</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exceder cuotas gratuitas o límites de rate-limiting podría bloquear el sistema de pistas.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Baja</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Seguridad de Contraseñas</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Si el hashing no es suficientemente robusto, las contraseñas podrían estar en riesgo.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Baja</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Escalabilidad del Frontend</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Al crecer el número de usuarios simultáneos, el frontend podría volverse lento sin optimizaciones.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Baja</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_deudas_técnicas">11.2. Deudas Técnicas</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 50%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Deuda</th>
<th class="tableblock halign-left valign-top">Descripción</th>
<th class="tableblock halign-left valign-top">Prioridad</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Sin caché de preguntas</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Las preguntas se consultan de MongoDB cada vez. Implementar caché en memoria mejoraría el rendimiento.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Media</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Validación limitada en frontend</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Algunas validaciones de formularios son básicas. Mejorar validación reduciría errores.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Baja</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Logs centralizados ausentes</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No hay sistema de logging unificado. Dificulta depuración en producción.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Media</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Sin monitorización</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No hay métricas de rendimiento ni alertas. Problemas se detectan cuando usuarios reportan.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Media</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Gestión manual de servicios</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Iniciar/detener servicios es manual. Docker Compose simplificaría el desarrollo.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Baja</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Tests E2E lentos</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Los tests de Puppeteer tardan varios minutos. Optimizar o paralelizar aceleraría CI/CD.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Baja</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Sin actualización automática de preguntas</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Las preguntas de Wikidata no se actualizan periódicamente. Datos pueden quedar obsoletos.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Media</p></td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-glossary">12. Glosario</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Término</th>
<th class="tableblock halign-left valign-top">Definición</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>API</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application Programming Interface. Interfaz que permite la comunicación entre diferentes servicios o aplicaciones.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CORS</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cross-Origin Resource Sharing. Mecanismo que permite solicitudes HTTP entre diferentes orígenes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>E2E</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">End-to-End. Tipo de testing que prueba el flujo completo del sistema desde la perspectiva del usuario.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Gemini API</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">API de Google que proporciona modelos de IA generativa, usado para el sistema de pistas.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Hint</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pista generada por IA que ayuda al usuario a responder preguntas sin revelar la respuesta directa.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Jest</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Framework de testing para JavaScript usado para tests unitarios.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>JWT</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JSON Web Token. Estándar para crear tokens de acceso que permiten autenticación.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>LLM</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Large Language Model. Modelo de IA usado para generar pistas durante el juego.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Material-UI</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Biblioteca de componentes React que implementa Material Design de Google.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Microservicio</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Arquitectura donde la aplicación se divide en servicios pequeños e independientes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>MongoDB</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Base de datos NoSQL orientada a documentos que almacena los datos del sistema.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Puppeteer</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Librería de Node.js que permite controlar navegadores Chrome para testing automatizado.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>React</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Librería de JavaScript para construir interfaces de usuario interactivas.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>REST</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Representational State Transfer. Estilo arquitectónico para APIs web usando HTTP.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Wikidata</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Base de conocimiento libre de donde se obtienen los datos para las preguntas de trivia.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 8.3 ES<br>
Last updated 2025-12-28 23:53:45 +0100
</div>
</div>
</body>
</html>